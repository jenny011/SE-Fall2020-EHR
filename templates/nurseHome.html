<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>WeCare</title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" href="/static/nurseHome.css">
</head>
<style>
	.nav-link:hover{cursor: pointer;}
</style>
<body>
	<nav class="navbar navbar-dark" style="background-color: #2D79D6;">
	  <span class="navbar-brand mb-0 h1">WeCare</span>
	  <div class="ml-auto" id="user-link-wrapper">
		  <a class="navbar-link text-white" href="/public">User</a>
		  <a class="navbar-link text-white" href="/logout">Logout</a>
	  </div>
	</nav>

	<nav class="nav nav-pills">
		<a class="main nav-link active" href="#">Home</a>
		<a class="main nav-link" href="#">All appointments</a>
		<form class="ml-auto form-inline" action="/nurseSearch" method="POST" style="padding-right: 1em;">
		  <div class="form-group mx-sm-3">
		    <label for="Search" class="sr-only">Search</label>
		    <input type="text" class="form-control" id="Search" placeholder="Doctor, patient...">
		  </div>
		  <button type="submit" class="btn btn-primary">Search</button>
		</form>
	</nav>

	<nav class="nav nav-tabs" style="border-top-style: solid; border-top-width:1px; border-top-color: grey; padding-top: 1em;">
		<div class="nav-item">
			<div class="sub nav-link active" onclick="getPendingApps()">Pending applications</div> <!--/pendingApp-->
		</div>
		<div class="nav-item">
			<div class="sub nav-link" onclick="getTodayAppts()">Today's appointments</div> <!--/todayAppt-->
		</div>
		<form class="ml-auto form-inline" action="/goCreateAppt" method="GET">
			<div class="form-group">
				<button class="btn btn-primary" type="submit">Create New Appointment</button>
			</div>
		</form>
	</nav>

	<!-- <nav class="navbar navbar-expand-sm navbar-light" style="padding: 0;">
		<div class="mr-auto navbar-nav"> -->
			<!--<a class="main nav-item nav-link active text-white bg-primary" href="#">Home</a>--> <!--/nurseHome-->
			<!--<a class="main nav-item nav-link text-dark bg-light" href="#">All Appointments</a>--> <!--/nurseAllAppt-->
		<!-- </div>
		<form class="ml-auto form-inline" action="/nurseSearch" method="POST" style="padding-right: 1em;">
			<div class="form-group mx-sm-3">
				<label for="Search" class="sr-only">Search</label>
				<input type="text" class="form-control" id="Search" placeholder="Doctor, patient...">
			</div>
			<button type="submit" class="btn btn-primary">Search</button>
		</form>
	</nav> -->

	<!-- <nav class="navbar navbar-expand-sm navbar-light" style="border-style: solid; border-width:1px; border-color: grey;">
		<div class="navbar-nav"> -->
			<!--<a class="sub nav-item nav-link active" href="#">Pending Applications</a>--> <!--/pendingApp-->
			<!--<a class="sub nav-item nav-link" href="#">Today's Appointments</a>--> <!--/todayAppt-->
		<!-- </div>
		<form class="ml-auto form-inline" action="/goCreateAppt" method="GET">
			<div class="form-group">
				<button class="btn btn-primary" style="background-color: #2D79D6;" type="submit">Create New Appointment</button>
			</div>
		</form>
	</nav> -->

	<div id="content-container">

		<div id="function-container">
			<div class='function' id="info-container">
				<table class="table">
				  <thead>
						<form class="form-inline" action="#">
					    <tr>
					      <th scope="col">
									<input type="radio" class="form-check-input" name="orderBy" id="appID" value="appID">
    							<label class="form-check-label" for="appID">Applcation ID</label>
								</th>
								<th scope="col">
									<input type="radio" class="form-check-input" name="orderBy" id="date" value="date">
    							<label class="form-check-label" for="date">Date</label>
								</th>
								<th scope="col">
									<input type="radio" class="form-check-input" name="orderBy" id="time" value="time">
    							<label class="form-check-label" for="time">Time</label>
								</th>
								<th scope="col">
									<input type="radio" class="form-check-input" name="orderBy" id="doctor" value="doctor">
									<label class="form-check-label" for="doctor">Doctor</label>
									<select class="custom-select-sm" id="inlineFormCustomSelectPref">
								    <option value="All" selected>All</option>
								    <option value="A">Alice</option>
								    <option value="B">Bob</option>
								    <option value="C">Cat</option>
								  </select>
								</th>
								<th scope="col">
									<input type="radio" class="form-check-input" name="orderBy" id="patient" value="patient">
    							<label class="form-check-label" for="patient">Patient</label>
								</th>
								<th scope="col">Symptoms</th>
								<th><button class="btn btn-sm btn-outline-primary view">Apply</button></th>
					    </tr>
						</form>
				  </thead>
				  <tbody>
			    	<!-- <tr>
				      <td>1</td>
				      <td>2020-11-11</td>
				      <td>11:00</td>
				      <td>A</td>
							<td>B</td>
							<td>Cough</td>
							<td><button class="btn btn-outline-primary view">View</button></td>
				    </tr> -->
				  </tbody>
				</table>
			</div>
		</div>
	</div>




	<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
	<script crossorigin="anonymous" integrity="sha512-WNLxfP/8cVYL9sj8Jnp6et0BkubLP31jhTG9vhL/F5uEZmg5wEzKoXp1kJslzPQWwPT1eyMiSxlKCgzHLOTOTQ==" src="https://lib.baomitu.com/jquery/3.5.1/jquery.js"></script>
	<script type="text/javascript" src="/static/index.js"></script>
	<script type="text/javascript">
		displayApps([{'appID': '1', 'date': '2020-11-11', 'time': '11:00', doctor:'A', patient: 'B', symptoms: 'Cough'},{'appID': '2', 'date': '2020-11-12', 'time': '12:00', doctor:'A', patient: 'C', symptoms: '/'}]);

		// on page loaded call getPendingApps()

		// get pending applications
		function getPendingApps(){
			jQuery.ajax({
				url: "http://localhost:5000/pendingApp",
				type: 'GET',
				data: {'pageSize': 10},
				success: function(data){
					console.log(data);
					displayApps(data);
				}
			});
		}

		function getTodayAppts() {
			jQuery.ajax({
				url: "http://localhost:5000/todayAppt",
				type: 'GET',
				data: {'pageSize': 10},
				success: function(data){
					console.log(data);
					displayApps(data);
				}
			});
		}

		function displayApps(data) {
			$('tbody').empty();
			for (let i=0; i < data.length; i++) {
				var newTr = $('<tr>');
				newTr.appendTo($('tbody'))
						.append($('<td>').text(data[i].appID))
						.append($('<td>').text(data[i].date))
						.append($('<td>').text(data[i].time))
						.append($('<td>').text(data[i].doctor))
						.append($('<td>').text(data[i].patient))
						.append($('<td>').text(data[i].symptoms));
			}
		}

		//------------------ styling -------------------
		// main navigation
    $(".main").on("click", function(event) {
        event.preventDefault();
        var clickedItem = $(this);
        $(".main").each( function() {
            $(this).removeClass("active");
        });
        clickedItem.addClass("active");
    });

		// sub navigation
		$(".sub").on("click", function(event) {
        event.preventDefault();
        var clickedItem = $(this);
        $(".sub").each( function() {
            $(this).removeClass("active");
        });
				clickedItem.addClass("active");
    });

	</script>
</body>
</html>
